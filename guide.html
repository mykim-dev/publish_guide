<!doctype html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title></title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" />

<link rel="stylesheet" type="text/css" href="./lib/tui/tui-select-box.min.css">
<script type="text/javascript" src="./lib/tui/tui-select-box.min.js"></script>

<link rel="stylesheet" type="text/css" href="./lib/tui/tui-date-picker.min.css">
<script type="text/javascript" src="./lib/tui/tui-date-picker.min.js"></script>

<link rel="stylesheet" type="text/css" href="./lib/tui/tui-pagination.min.css">
<script type="text/javascript" src="./lib/tui/tui-pagination.min.js"></script>

<link rel="stylesheet" type="text/css" href="./lib/tui/tui-grid.min.css">
<script type="text/javascript" src="./lib/tui/tui-grid.min.js"></script>

<script type="text/javascript" src="./basic-dummy.js"></script>

<link rel="stylesheet" type="text/css" href="./css/common.css">
<script type="text/javascript" src="./js/common.js"></script>

</head>
<body>
<div class="wrap">
    <div class="qs-row">
        <div class="qs-col-12">

            <!-- toolbar -->
            <dl class="qs-toolbar">
                <dt>
                    <h2 class="qs-title">Form</h2>
                    <div class="qs-button-group">
                        <button class="qs-button">신규</button>
                        <button class="qs-button qs-button--primary">조회</button>
                        <!-- <button type="button" class="qs-button qs-button-primary">primary</button>
                        <button type="button" class="qs-button qs-button-success">success</button>
                        <button type="button" class="qs-button qs-button-warning">warning</button>
                        <button type="button" class="qs-button qs-button-danger">danger</button>
                        <button type="button" class="qs-button qs-button-error">error</button>
                        <button type="button" class="qs-button qs-button-info">info</button> -->
                        <button type="button" class="qs-button toolbar-toggle"><i class="qs-icon"></i></button>
                    </div>
                </dt>
                <dd>
                    <div class="qs-row">
                        <div class="qs-col-8">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-text [type=text]</label>
                                <div class="qs-form-item__content">
                                    <input type="text" class="qs-text" placeholder="Please input">
                                </div>
                            </div>
                        </div>
                        <div class="qs-col-8">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-text [type=number]</label>
                                <div class="qs-form-item__content">
                                    <input type="number" class="qs-text" placeholder="Please input">
                                </div>
                            </div>
                        </div>
                        <div class="qs-col-8">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-number</label>
                                <div class="qs-form-item__content">
                                    <input type="number" class="qs-number" placeholder="Please input">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="qs-row">
                        <div class="qs-col-8">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-lookup</label>
                                <div class="qs-form-item__content">
                                    <div class="qs-lookup">
                                        <input type="text" disabled>
                                        <button type="button"><i class="qs-icon fas fa-search"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="qs-col-8">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-select</label>
                                <div class="qs-form-item__content">
                                    <div id="select1" class="qs-select">
                                        <select>
                                            <option value="1">OPTION1</option>
                                            <option value="2">OPTION2</option>
                                            <option value="3" selected>OPTION3</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="qs-row">
                        <div class="qs-col-8">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-date single</label>
                                <div class="qs-form-item__content">
                                    <div id="date1" class="qs-date" date-type="single"></div>
                                </div>
                            </div>
                        </div>
                        <div class="qs-col-8">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-date month</label>
                                <div class="qs-form-item__content">
                                    <div id="date2" class="qs-date" date-type="month"></div>
                                </div>
                            </div>
                        </div>
                        <div class="qs-col-8">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-date year</label>
                                <div class="qs-form-item__content">
                                    <div id="date3" class="qs-date" date-type="year"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="qs-row">
                        <div class="qs-col-12">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-date range</label>
                                <div class="qs-form-item__content">
                                    <div id="date4" class="qs-date" date-type="range"></div>
                                </div>
                            </div>
                        </div>
                        <div class="qs-col-12">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-date period</label>
                                <div class="qs-form-item__content">
                                    <div id="date5" class="qs-date" date-type="period"></div>
                                </div>
                            </div>
                        </div>                        
                    </div>
                    <div class="qs-row">
                        <div class="qs-col-12">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-check</label>
                                <div class="qs-form-item__content">
                                    <div class="qs-check">
                                        <input id="chk1" type="checkbox">
                                        <label for="chk1">basic</label>
                                    </div>
                                    <div class="qs-check">
                                        <input id="chk2" type="checkbox" checked>
                                        <label for="chk2">checked</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="qs-col-12">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-radio</label>
                                <div class="qs-form-item__content">
                                    <div class="qs-radio">
                                        <input id="radio1" type="radio" name="radio">
                                        <label for="radio1">basic</label>
                                    </div>
                                    <div class="qs-radio">
                                        <input id="radio2" type="radio" name="radio" checked>
                                        <label for="radio2">checked</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="qs-row">
                        <div class="qs-col-24">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-file</label>
                                <div class="qs-form-item__content">
                                    <div class="qs-file">
                                        <input type="file" id="file1">
                                        <label for="file1">select file</label>
                                        <ul class="file-list">
                                            <li class="file-list-item">
                                                <span class="file-info">testtest.xlsx</span>
                                                <span class="file-delete">삭제</span>
                                            </li>
                                        </ul>
                                    </div>                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="qs-row">
                        <div class="qs-col-24">
                            <div class="qs-form-item direction-column">
                                <label class="qs-form-item__label">qs-textarea</label>
                                <div class="qs-form-item__content">
                                    <textarea class="qs-textarea"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </dd>
            </dl>
        
        </div>
        <div class="qs-col-12">
            <!-- toolbar -->
            <dl class="qs-toolbar">
                <dt>
                    <div class="qs-title">test</div>
                    <button class="qs-button toolbar-toggle"><i class="qs-icon"></i></button>
                </dt>
                <dd>
                    <div id="grid"></div>
                </dd>
            </dl>

        </div>
    </div>
</div>

<script>
    class RowNumberRenderer {
        constructor(props) {
            const el = document.createElement('span');
            el.innerHTML = `No.${props.formattedValue}`;
            this.el = el;
        }

        getElement() {
            return this.el;
        }

        render(props) {
            this.el.innerHTML = `No.${props.formattedValue}`;
        }
    }

    const grid = new tui.Grid({
        el: document.getElementById('grid'),
        // data: {
        //     api: {
        //         readData: { url: '/api/readData', method: 'GET' }
        //     }
        // },
        data: gridData,
        pageOptions: {
            useClient: true,
            perPage: 10
        },
        header: {
            height: 32,
            align: 'center',
            valign: 'middle',
            columns: [
                {
                    name: 'name',
                    align: 'left',  // left, center, right
                    valign: 'middle'    // top, middle, bottom
                }
            ]
        },
        width: 'auto',
        rowHeight: 32,
        minRowHeight: 32,
        bodyHeight: 337,
        minBodyHeight: 337,
        columnOptions: {
            minWidth: 100,
            resizable: true,
            frozenCount: 1,
            frozenBorderWidth: 1,            
        },
        useClientSort: true,
        editingEvent: 'click', // 
        scrollX: true,
        scrollY: true,
        heightResizable: true,
        selectionUnit: 'cell',   // cell, row        
        // rowHeaders: ['rowNum'],
        rowHeaders: [
            {
                type: 'rowNum', // rowNum, checkbox
                width: '50',
                align: 'center',
                renderer: {
                    type: RowNumberRenderer
                }
            },
            {
                type: 'checkbox',
                width: '50',
                align: 'center'
            }
        ],        
        columns: [
            {
                name: 'name',
                ellipsis: true,
                align: 'center',
                valign: 'middle',
                className: '',                
                header: 'Name',
                width: 100,
                hidden: false,
                resizable: true,
                defaultValue: '0',
                escapeHTML: false,
                ignored: false,
                sortable: true,
                sortingType: 'desc',
                editor: {
                    type: 'text',
                    options: {}
                }
            },
            {
                header: 'Artist',
                name: 'artist',
                sortingType: 'asc',
                sortable: true,
                filter: { type: 'text', showApplyBtn: true, showClearBtn: true }
            },
            {
                header: 'Type',
                name: 'type'
            },
            {
                header: 'Release',
                name: 'release'
            },
            {
                header: 'Genre',
                name: 'genre',
                validation: {
                    regExp: /[a-z]+_[a-z]/
                }
            },
            {
                header: 'Price',
                name: 'price',
                align: 'right',
                validation: {
                    regExp: /\B(?=(\d{3})+(?!\d))/g
                }
            }
        ],
        summary: {
            height: 32,            
            position: 'bottom',
            columnContent: {
                price: {
                    template: (e) => {
                        console.log(e)
                        return `sum: ${e.sum}<br>avg: ${e.avg}`
                    }
                }
            }
        },
        draggable: true
    });

    grid.on('check', function(ev) {
      console.log('check', ev);
    });

    grid.on('uncheck', function(ev) {
      console.log('uncheck', ev);
    });
</script>
</body>
</html>